<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
        content="CatÃ¡logo de pelÃ­culas Â· Explora el listado de pelÃ­culas disponibles con tÃ­tulos, aÃ±os y gÃ©neros." />
    <title>ğŸ¬ CineApp Â· CatÃ¡logo de PelÃ­culas</title>

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;900&display=swap"
        rel="stylesheet" />

    <style>
        /* â”€â”€ Reset & base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg: #0a0a12;
            --surface: #13131f;
            --card: #1b1b2e;
            --accent: #e94560;
            --accent2: #7b2ff7;
            --text: #e8e8f0;
            --muted: #7b7b9a;
            --radius: 14px;
            --transition: .25s ease;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            min-height: 100vh;
        }

        /* â”€â”€ Header / Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        header {
            position: relative;
            overflow: hidden;
            text-align: center;
            padding: 100px 20px 80px;
            background: radial-gradient(ellipse 120% 80% at 50% -10%, rgba(123, 47, 247, .45) 0%, transparent 70%),
                radial-gradient(ellipse 80% 60% at 90% 110%, rgba(233, 69, 96, .35) 0%, transparent 60%),
                var(--bg);
        }

        header::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.02'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .hero-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--accent2), var(--accent));
            color: #fff;
            font-size: .75rem;
            font-weight: 700;
            letter-spacing: .12em;
            text-transform: uppercase;
            padding: 6px 16px;
            border-radius: 100px;
            margin-bottom: 22px;
        }

        header h1 {
            font-size: clamp(2.4rem, 6vw, 4.5rem);
            font-weight: 900;
            line-height: 1.1;
            background: linear-gradient(135deg, #fff 30%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 18px;
        }

        header p {
            color: var(--muted);
            font-size: 1.05rem;
            max-width: 480px;
            margin: 0 auto 40px;
            line-height: 1.6;
        }

        /* â”€â”€ Filter bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .filter-bar {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            padding: 0 20px 60px;
        }

        .filter-bar input {
            flex: 1 1 220px;
            max-width: 340px;
            padding: 12px 18px;
            border-radius: 100px;
            border: 1.5px solid rgba(255, 255, 255, .1);
            background: var(--surface);
            color: var(--text);
            font-family: inherit;
            font-size: .95rem;
            outline: none;
            transition: border-color var(--transition), box-shadow var(--transition);
        }

        .filter-bar input:focus {
            border-color: var(--accent2);
            box-shadow: 0 0 0 3px rgba(123, 47, 247, .2);
        }

        .filter-bar input::placeholder {
            color: var(--muted);
        }

        /* â”€â”€ Main grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        main {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 24px 80px;
        }

        .section-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 28px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title span.count {
            font-size: .85rem;
            font-weight: 400;
            color: var(--muted);
            background: var(--surface);
            padding: 3px 10px;
            border-radius: 100px;
        }

        #movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(210px, 1fr));
            gap: 24px;
        }

        /* â”€â”€ Movie card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .movie-card {
            background: var(--card);
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, .06);
            cursor: pointer;
            transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
            animation: fadeUp .45s ease both;
        }

        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(24px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .movie-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 20px 50px rgba(0, 0, 0, .5), 0 0 0 1px rgba(233, 69, 96, .35);
            border-color: rgba(233, 69, 96, .4);
        }

        .movie-poster {
            position: relative;
            width: 100%;
            aspect-ratio: 2/3;
            overflow: hidden;
            background: var(--surface);
        }

        .movie-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform .4s ease;
            display: block;
        }

        .movie-card:hover .movie-poster img {
            transform: scale(1.08);
        }

        .poster-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(10, 10, 18, .85) 0%, transparent 50%);
            opacity: 0;
            transition: opacity var(--transition);
        }

        .movie-card:hover .poster-overlay {
            opacity: 1;
        }

        .poster-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: var(--muted);
            font-size: .85rem;
        }

        .poster-placeholder svg {
            opacity: .3;
        }

        .movie-info {
            padding: 14px 16px 18px;
        }

        .movie-title {
            font-size: 1rem;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 6px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .movie-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .movie-year {
            font-size: .82rem;
            color: var(--muted);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .movie-year::before {
            content: 'ğŸ“…';
            font-size: .75rem;
        }

        .genre-tag {
            font-size: .72rem;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 100px;
            background: rgba(123, 47, 247, .2);
            color: #b993ff;
            letter-spacing: .04em;
        }

        .movie-rating {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: .82rem;
            color: #f5c842;
            margin-top: 8px;
            font-weight: 600;
        }

        /* â”€â”€ States â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #status {
            text-align: center;
            padding: 60px 20px;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 3px solid rgba(255, 255, 255, .1);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin .8s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .status-text {
            color: var(--muted);
            font-size: .95rem;
        }

        .error-box {
            background: rgba(233, 69, 96, .1);
            border: 1px solid rgba(233, 69, 96, .3);
            border-radius: var(--radius);
            padding: 24px 32px;
            max-width: 480px;
            margin: 0 auto;
            text-align: left;
        }

        .error-box h3 {
            color: var(--accent);
            margin-bottom: 8px;
        }

        .error-box p {
            color: var(--muted);
            font-size: .9rem;
            line-height: 1.6;
        }

        .error-box code {
            display: inline-block;
            margin-top: 10px;
            background: var(--surface);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: .85rem;
            color: #b993ff;
        }

        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            color: var(--muted);
            padding: 60px 0;
            font-size: 1rem;
        }

        /* â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        footer {
            text-align: center;
            padding: 32px 20px;
            border-top: 1px solid rgba(255, 255, 255, .06);
            color: var(--muted);
            font-size: .82rem;
        }

        footer strong {
            color: var(--accent);
        }

        /* â”€â”€ Responsive tweaks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        @media (max-width: 520px) {
            #movies-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 14px;
            }
        }
    </style>
</head>

<body>

    <!-- â”€â”€ HERO â”€â”€ -->
    <header>
        <div class="hero-badge">ğŸ¬ Node.js REST API</div>
        <h1>CatÃ¡logo de<br />PelÃ­culas</h1>
        <p>Explora nuestra colecciÃ³n de pelÃ­culas. Datos servidos en tiempo real desde tu API local.</p>
    </header>

    <!-- â”€â”€ SEARCH â”€â”€ -->
    <div class="filter-bar">
        <input id="search-input" type="search" placeholder="ğŸ”  Buscar por tÃ­tulo o gÃ©neroâ€¦"
            aria-label="Buscar pelÃ­culas" />
    </div>

    <!-- â”€â”€ CONTENT â”€â”€ -->
    <main>
        <div id="status">
            <div class="spinner"></div>
            <p class="status-text">Conectando con la APIâ€¦</p>
        </div>

        <h2 class="section-title" id="section-title" style="display:none;">
            PelÃ­culas <span class="count" id="movie-count">0</span>
        </h2>

        <div id="movies-grid" role="list" aria-label="Listado de pelÃ­culas"></div>
    </main>

    <!-- â”€â”€ FOOTER â”€â”€ -->
    <footer>
        <p>Desarrollado con <strong>Node.js + Express</strong> Â· Clase 3 Â· &copy; 2025</p>
    </footer>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SCRIPT â€“ Fetch pelÃ­culas desde la API
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script>
        const API_URL = 'http://localhost:3000/movies';
        const grid = document.getElementById('movies-grid');
        const status = document.getElementById('status');
        const sectionTitle = document.getElementById('section-title');
        const countBadge = document.getElementById('movie-count');
        const searchInput = document.getElementById('search-input');

        let allMovies = [];

        /* â”€â”€ Render cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        function renderMovies(movies) {
            grid.innerHTML = '';

            if (movies.length === 0) {
                grid.innerHTML = '<p class="no-results">ğŸ­ No se encontraron pelÃ­culas.</p>';
                countBadge.textContent = '0';
                return;
            }

            countBadge.textContent = movies.length;

            movies.forEach((movie, i) => {
                const card = document.createElement('article');
                card.className = 'movie-card';
                card.role = 'listitem';
                card.style.animationDelay = `${i * 40}ms`;

                /* GÃ©neros (tomamos mÃ¡x. 2) */
                const genres = Array.isArray(movie.genre) ? movie.genre.slice(0, 2) : [];
                const genreTags = genres.map(g =>
                    `<span class="genre-tag">${g}</span>`
                ).join('');

                /* Rating (si existe) */
                const ratingHTML = movie.rate
                    ? `<div class="movie-rating">â­ ${Number(movie.rate).toFixed(1)}</div>`
                    : '';

                /* Poster */
                const posterHTML = movie.poster
                    ? `<img src="${movie.poster}" alt="Poster de ${escapeHTML(movie.title)}" loading="lazy" onerror="this.parentElement.innerHTML=fallbackPoster()" />`
                    : fallbackPoster();

                card.innerHTML = `
          <div class="movie-poster">
            ${posterHTML}
            <div class="poster-overlay"></div>
          </div>
          <div class="movie-info">
            <h3 class="movie-title">${escapeHTML(movie.title)}</h3>
            <div class="movie-meta">
              <span class="movie-year">${movie.year ?? 'â€”'}</span>
              ${genreTags}
            </div>
            ${ratingHTML}
          </div>
        `;

                grid.appendChild(card);
            });
        }

        /* â”€â”€ Placeholder SVG cuando no hay poster â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        function fallbackPoster() {
            return `
        <div class="poster-placeholder">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <rect x="2" y="3" width="20" height="18" rx="2"/>
            <path d="M8 3v18M16 3v18M2 9h20M2 15h20"/>
          </svg>
          <span>Sin poster</span>
        </div>`;
        }

        /* â”€â”€ Escape HTML â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        function escapeHTML(str) {
            if (!str) return '';
            return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
        }

        /* â”€â”€ Mostrar error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        function showError(msg) {
            status.innerHTML = `
        <div class="error-box">
          <h3>âš ï¸ Error al cargar pelÃ­culas</h3>
          <p>${msg}</p>
          <code>GET ${API_URL}</code>
        </div>`;
        }

        /* â”€â”€ Fetch pelÃ­culas â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        async function fetchMovies() {
            try {
                const res = await fetch(API_URL);

                if (!res.ok) {
                    throw new Error(`El servidor respondiÃ³ con estado ${res.status}`);
                }

                allMovies = await res.json();

                status.style.display = 'none';
                sectionTitle.style.display = 'flex';

                renderMovies(allMovies);

            } catch (err) {
                const isNetworkError = err instanceof TypeError;
                showError(
                    isNetworkError
                        ? 'No se pudo conectar con la API. AsegÃºrate de que el servidor estÃ© corriendo en <strong>localhost:3000</strong>.'
                        : err.message
                );
            }
        }

        /* â”€â”€ BÃºsqueda en tiempo real â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        searchInput.addEventListener('input', () => {
            const query = searchInput.value.trim().toLowerCase();

            if (!query) {
                renderMovies(allMovies);
                return;
            }

            const filtered = allMovies.filter(m => {
                const titleMatch = m.title?.toLowerCase().includes(query);
                const genreMatch = Array.isArray(m.genre) && m.genre.some(g => g.toLowerCase().includes(query));
                return titleMatch || genreMatch;
            });

            renderMovies(filtered);
        });

        /* â”€â”€ Arrancar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        fetchMovies();
    </script>
</body>

</html>